<!DOCTYPE html>
<html lang="en-us">

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>
    
      Extending modAL &middot; modAL
    
  </title>

  <!-- CSS -->
  <link rel="stylesheet" href="public/css/poole.css">
  <link rel="stylesheet" href="public/css/syntax.css">
  <link rel="stylesheet" href="public/css/hyde.css">
  <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=PT+Sans:400,400italic,700|Abril+Fatface">

  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="public/apple-touch-icon-144-precomposed.png">
                                 <link rel="shortcut icon" href="public/favicon.ico">

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">
</head>


  <body>

    <div class="sidebar">
  <div class="container sidebar-sticky">
    <div class="sidebar-about">
      <h1>
        <a href="index">
          modAL
        </a>
      </h1>
      <p class="lead">A modular active learning framework for Python3</p>
    </div>

    <nav class="sidebar-nav">
      <b>Overview</b>
        <a class="sidebar-nav-item" href="index">modAL in a nutshell</a>
        <a class="sidebar-nav-item" href="Installation">Installation</a>
      <b>Models</b>
        <a class="sidebar-nav-item" href="ActiveLearner">ActiveLearner</a>
        <a class="sidebar-nav-item" href="Committee">Committee</a>
      <b>Query strategies</b>
        <a class="sidebar-nav-item" href="Uncertainty-sampling">Uncertainty sampling</a>
        <a class="sidebar-nav-item" href="Disagreement-sampling">Disagreement sampling</a>
        <a class="sidebar-nav-item" href="Extending-modAL">Extending modAL</a>
      <b>Examples</b>
        <a class="sidebar-nav-item" href="Pool-based-sampling">Pool-based sampling</a>
        <a class="sidebar-nav-item" href="Stream-based-sampling">Stream-based sampling</a>
        <a class="sidebar-nav-item" href="Active-regression">Active regression</a>
        <a class="sidebar-nav-item" href="Query-by-committee">Query by committee</a>
        <a class="sidebar-nav-item" href="Bootstrapping-and-bagging">Bootstrapping and bagging</a>
        <a class="sidebar-nav-item" href="Keras-integration">Keras integration</a>
      <b>API reference</b>
        <a class="sidebar-nav-item" href="Models-API">modAL.models</a>
        <a class="sidebar-nav-item" href="Uncertainty-sampling-API">modAL.uncertainty</a>
        <a class="sidebar-nav-item" href="Disagreement-sampling-API">modAL.disagreement</a>
    </nav>

    <p>&copy; <a href="https://github.com/poole/hyde">Theme</a> by Mark Otto</p>
  </div>
</div>


    <div class="content container">
      <div class="page">
  <h1 id="extending-modal">Extending modAL</h1>
<p>modAL was designed for researchers, allowing quick and efficient prototyping. For this purpose, modAL makes it easy for you to use your customly designed parts, for instance query strategies or new classifier algorithms.</p>

<h2 id="page-contents">Page contents</h2>
<ul>
  <li><a href="#query-strategy">Writing your own query strategy</a></li>
  <li><a href="#custom-estimators">Using your custom estimators</a></li>
</ul>

<h2 id="writing-your-own-query-strategy">Writing your own query strategy<a name="query-strategy"></a></h2>
<p>In modAL, a query strategy for active learning is implemented as a function, taking an estimator with a bunch of data and turning it into a data point from the data you supplied to it. Exactly like in the following.</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">some_query_strategy</span><span class="p">(</span><span class="n">classifier</span><span class="p">,</span> <span class="n">X</span><span class="p">,</span> <span class="n">a_keyword_argument</span><span class="o">=</span><span class="mi">42</span><span class="p">):</span>
    <span class="n">proba</span> <span class="o">=</span> <span class="n">classifier</span><span class="o">.</span><span class="n">predict_proba</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>
    <span class="c"># ...</span>
    <span class="c"># ... do some magic and find the most informative instance ...</span>
    <span class="c"># ...</span>
    <span class="k">return</span> <span class="n">query_idx</span><span class="p">,</span> <span class="n">X</span><span class="p">[</span><span class="n">query_idx</span><span class="p">]</span>
</code></pre></div></div>
<p>Putting this to work is as simple as the following.</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">modAL.models</span> <span class="kn">import</span> <span class="n">ActiveLearner</span>
<span class="kn">from</span> <span class="nn">sklearn.ensemble</span> <span class="kn">import</span> <span class="n">RandomForestClassifier</span>

<span class="c"># initializing the learner</span>
<span class="n">learner</span> <span class="o">=</span> <span class="n">ActiveLearner</span><span class="p">(</span>
    <span class="n">predictor</span><span class="o">=</span><span class="n">RandomForestClassifier</span><span class="p">(),</span>
	<span class="n">query_strategy</span><span class="o">=</span><span class="n">some_query_strategy</span>
<span class="p">)</span>

<span class="c"># querying for labels</span>
<span class="n">query_idx</span><span class="p">,</span> <span class="n">query_instance</span> <span class="o">=</span> <span class="n">learner</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>
</code></pre></div></div>
<p>For a more elaborate example see for instance this <a href="Active-regression">active regression</a>.</p>

<h2 id="using-your-custom-estimators">Using your custom estimators<a name="custom-estimators"></a></h2>
<p>As long as your classifier follows the scikit-learn API, you can use it in your modAL workflow. (Really, all it needs is a <code class="highlighter-rouge">.fit(X, y)</code> and <code class="highlighter-rouge">.predict(X)</code> method.) For instance, the ensemble model implemented in Committee can be given to an ActiveLearner.</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># initializing the learners</span>
<span class="n">n_learners</span> <span class="o">=</span> <span class="mi">3</span>
<span class="n">learner_list</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n_learners</span><span class="p">):</span>
    <span class="n">learner</span> <span class="o">=</span> <span class="n">ActiveLearner</span><span class="p">(</span>
        <span class="n">predictor</span><span class="o">=</span><span class="n">RandomForestClassifier</span><span class="p">(),</span>
        <span class="n">X_initial</span><span class="o">=</span><span class="n">X_initial</span><span class="p">,</span> <span class="n">y_initial</span><span class="o">=</span><span class="n">y_pool</span><span class="p">[</span><span class="n">initial_idx</span><span class="p">],</span>
        <span class="n">bootstrap_init</span><span class="o">=</span><span class="bp">True</span>
    <span class="p">)</span>
    <span class="n">learner_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">learner</span><span class="p">)</span>

<span class="c"># assembling the Committee</span>
<span class="n">committee</span> <span class="o">=</span> <span class="n">Committee</span><span class="p">(</span><span class="n">learner_list</span><span class="p">)</span>

<span class="c"># ensemble active learner from the Committee</span>
<span class="n">ensemble_learner</span> <span class="o">=</span> <span class="n">ActiveLearner</span><span class="p">(</span>
    <span class="n">predictor</span><span class="o">=</span><span class="n">committee</span>
<span class="p">)</span>
</code></pre></div></div>
<p>Now you are ready for active learning with an ensemble of classifiers! If you would like to keep bagging the data pass <code class="highlighter-rouge">bootstrap=True</code> to the <code class="highlighter-rouge">.teach()</code> method!</p>

</div>

    </div>

  </body>
</html>
